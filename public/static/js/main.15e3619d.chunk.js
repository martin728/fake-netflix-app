(this["webpackJsonpstreaming-service.react."]=this["webpackJsonpstreaming-service.react."]||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(10),r=n(48),a=n.n(r),i=n(33),s=n(13),o=n(16),u=n(0),l=n.n(u),j=n(1),d=n(44),b=(n(56),n(69),d.a.initializeApp({apiKey:"AIzaSyCMrsCVrnvI6TWSuabZaGpBCcDM49IMUN0",authDomain:"auth-development-f033b.firebaseapp.com",projectId:"auth-development-f033b",storageBucket:"auth-development-f033b.appspot.com",messagingSenderId:"772765047876",appId:"1:772765047876:web:f2420b03f3dc9be830f011"})),h=b.auth(),f=b.firestore(),v=d.a.firestore().collection("fav-movies"),m=new d.a.auth.GoogleAuthProvider,O=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.where("userId","==",t).get());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(j.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.where("userId","==",n).where("movieId","==",c).get().then((function(e){if(0==e.docs.map((function(e){return e.data()})).length)return v.add(t);console.log("Movie already exists")}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.signInWithPopup(m);case 3:return t=e.sent,n=t.user,e.next=7,f.collection("users").where("uid","==",n.uid).get();case 7:if(0!==e.sent.docs.length){e.next=11;break}return e.next=11,f.collection("users").add({uid:n.uid,name:n.displayName,authProvider:"google",email:n.email});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(l.a.mark((function e(t,n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,h.signInWithEmailAndPassword(n,c);case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n,c){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(l.a.mark((function e(t,n,c){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.createUserWithEmailAndPassword(n,c);case 3:return r=e.sent,a=r.user,e.next=7,f.collection("users").add({uid:a.uid,name:t,authProvider:"local",email:n});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,c){return e.apply(this,arguments)}}(),w=function(){h.signOut()},y=n(27),k=n(6),S=function(e){var t=e.image,n=e.name,c=e.rating,r=e.id,a=e.favourite,i=Object(o.f)(),u=Object(y.a)(h),l=Object(s.a)(u,1)[0];return Object(k.jsxs)("div",{className:"movie",children:[Object(k.jsx)("button",{className:"like-btn ".concat(l?"":"disable-btn"," ").concat(a?"liked":"notLiked"),onClick:function(){var e={userId:l.uid,movieId:r};p(e,l.uid,r)},children:"\u2665"}),Object(k.jsx)("img",{onClick:function(){return i.push("/movies/"+r)},src:(null===t||void 0===t?void 0:t.medium)?null===t||void 0===t?void 0:t.medium:"https://images.unsplash.com/photo-1518676590629-3dcbd9c5a5c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1yZWxhdGVkfDR8fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=800&q=60",alt:n}),Object(k.jsxs)("div",{className:"movie-info",children:[Object(k.jsx)("h3",{children:n}),Object(k.jsx)("span",{children:(null===c||void 0===c?void 0:c.average)?null===c||void 0===c?void 0:c.average:"N/A"})]})]})},C=function(){return fetch("https://api.tvmaze.com/shows").then((function(e){return e.json()}))},I=function(e){return fetch("https://api.tvmaze.com/shows/"+e).then((function(e){return e.json()}))},E=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(y.a)(h),o=Object(s.a)(a,1)[0];return Object(c.useEffect)((function(){o?O(o.uid).then((function(e){var t=[];e.docs.map((function(e){return t.push(e.data().movieId)})),C().then((function(e){e.forEach((function(e){e.favourite=t.includes(e.id)})),r(e)}))})):C().then((function(e){return r(e)}))}),[o]),Object(k.jsxs)("div",{className:"movie-container",children:[Object(k.jsx)("div",{className:"header-bg"}),Object(k.jsxs)("div",{className:"sort-btns",children:[Object(k.jsx)("button",{className:"form-btn",onClick:function(){C().then((function(e){return r(e.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})))}))},children:"Sort by alphabet"}),Object(k.jsx)("button",{className:"form-btn",onClick:function(){C().then((function(e){return r(e.sort((function(e,t){return e.rating.average<t.rating.average?1:e.rating.average>t.rating.average?-1:0})))}))},children:"Sort by rating"}),Object(k.jsx)("button",{className:"form-btn",onClick:function(){C().then((function(e){return r(e.slice().sort((function(e,t){return e.ended<t.ended?1:e.ended>t.ended?-1:0})))}))},children:"Sort by date"})]}),Object(k.jsx)("div",{className:"movie-grid",children:n.length>0&&n.map((function(e){return Object(k.jsx)(S,Object(i.a)({},e),null===e||void 0===e?void 0:e.id)}))})]})},P=function(){var e,t,n,r,a,i=Object(o.g)().id,u=Object(c.useState)([]),l=Object(s.a)(u,2),j=l[0],d=l[1];return Object(c.useEffect)((function(){I(i).then((function(e){return d(e)}))}),[i]),Object(k.jsxs)("div",{className:"movie-description",children:[Object(k.jsxs)("div",{className:"movie-picture",children:[Object(k.jsx)("h1",{children:null===j||void 0===j?void 0:j.name}),Object(k.jsx)("img",{src:null===j||void 0===j||null===(e=j.image)||void 0===e?void 0:e.medium,alt:"img"})]}),Object(k.jsxs)("div",{className:"movies-info",children:[Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Genres"}),": ",null===j||void 0===j||null===(t=j.genres)||void 0===t?void 0:t.join(", ")]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Premiere"}),": ",null===j||void 0===j||null===(n=j.ended)||void 0===n?void 0:n.split("-").reverse().join(".")]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Language"}),": ",null===j||void 0===j?void 0:j.language]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Runtime"}),": ",null===j||void 0===j?void 0:j.averageRuntime]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Rating"}),": ",null===j||void 0===j||null===(r=j.rating)||void 0===r?void 0:r.average]}),Object(k.jsxs)("div",{className:"movie-summary",children:[Object(k.jsx)("p",{children:Object(k.jsx)("b",{children:"Description:"})}),Object(k.jsx)("div",{children:null===j||void 0===j||null===(a=j.summary)||void 0===a?void 0:a.replace("<p>"," ").replace("</p>"," ").replace("<b>"," ").replace("</b>"," ")})]})]})]})},D=n(23),A=function(){var e,t,n=Object(y.a)(h),r=Object(s.a)(n,1)[0],a=Object(c.useState)([]),o=Object(s.a)(a,2),u=o[0],l=o[1];return Object(c.useEffect)((function(){r&&O(r.uid).then((function(e){var t=[];e.docs.map((function(e){return t.push(e.data().movieId)})),t.forEach((function(e){return I(e).then((function(e){return l((function(t){return[].concat(Object(D.a)(t),[e])}))}))}))})).catch((function(e){console.log("Error getting documents: ".concat(e))}))}),[r,null===r||void 0===r?void 0:r.uid]),Object(k.jsxs)("div",{className:"my-account",children:[Object(k.jsx)("h1",{children:(null===r||void 0===r||null===(e=r.displayName)||void 0===e?void 0:e.split(" ")[0])?"Welcome, "+(null===r||void 0===r||null===(t=r.displayName)||void 0===t?void 0:t.split(" ")[0])+"!":""}),Object(k.jsx)("h3",{children:"Here is your collection of movies:"}),Object(k.jsx)("div",{className:"movie-container",children:u.length>0&&u.map((function(e){return Object(k.jsx)(S,Object(i.a)({},e),null===e||void 0===e?void 0:e.id)}))})]})},M=function(){var e=Object(o.g)().query,t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){var t;(t=e,fetch("https://api.tvmaze.com/search/shows?q="+t).then((function(e){return e.json()})).then((function(e){return e.map((function(e){return e.show}))}))).then((function(e){return a(e)}))}),[e]),Object(k.jsx)("div",{className:"movie-container",children:r.length>0&&r.map((function(e){return Object(k.jsx)(S,Object(i.a)({},e),null===e||void 0===e?void 0:e.id)}))})},G=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),i=Object(s.a)(a,2),u=i[0],l=i[1],j=Object(c.useState)(""),d=Object(s.a)(j,2),b=d[0],f=d[1],v=Object(y.a)(h),m=Object(s.a)(v,2),O=m[0],p=m[1],g=Object(o.f)();return Object(c.useEffect)((function(){p||O&&g.replace("/dashboard")}),[O,p,g]),Object(k.jsxs)("div",{className:"form",children:[Object(k.jsx)("h1",{children:"Sign Up"}),Object(k.jsxs)("form",{className:"form-page",children:[Object(k.jsx)("label",{children:"Name"}),Object(k.jsx)("input",{type:"text",value:b,onChange:function(e){return f(e.target.value)},placeholder:"Name..."}),Object(k.jsx)("label",{children:"Email"}),Object(k.jsx)("input",{type:"email",value:n,onChange:function(e){return r(e.target.value)},placeholder:"Email..."}),Object(k.jsx)("label",{children:"Password"}),Object(k.jsx)("input",{type:"password",value:u,onChange:function(e){return l(e.target.value)},placeholder:"Password..."}),Object(k.jsx)("label",{children:"Confirm Password"}),Object(k.jsx)("input",{type:"password",placeholder:"Password..."})]}),Object(k.jsxs)("div",{className:"btn-container",children:[Object(k.jsx)("button",{className:"form-btn",onClick:function(e){return function(e){e.preventDefault(),b||alert("Please enter name"),N(b,n,u)}(e)},children:" Sign Up"}),Object(k.jsx)("button",{className:"form-btn",onClick:function(){return x(n,u)},children:" Sign Up with Google"})]}),Object(k.jsxs)("p",{children:["Already have an account? ",Object(k.jsx)("span",{className:"sign-btn",onClick:function(){g.push("/signin")},children:"Sign in!"})]})]})},W=function(){var e=Object(o.f)();return Object(k.jsx)("div",{children:Object(k.jsx)("button",{className:"form-btn",onClick:function(){return e.push("/signin")},children:"Log In"})})},z=function(){var e=Object(o.f)();return Object(k.jsx)("div",{children:Object(k.jsx)("button",{className:"form-btn account-btn",onClick:function(){return e.push("/myaccount")},children:"My Account"})})},U=function(){return Object(k.jsx)("div",{children:Object(k.jsx)("button",{className:"form-btn",onClick:w,children:"Log Out"})})},q=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(y.a)(h),i=Object(s.a)(a,1)[0],u=Object(o.f)();return Object(k.jsx)("div",{children:Object(k.jsxs)("header",{className:"logo",children:[Object(k.jsx)("h3",{className:"logo-text",onClick:function(){u.push("/")},children:"FakeNetflix"}),Object(k.jsxs)("div",{className:"header-right",children:[Object(k.jsx)("form",{onSubmit:function(e){e.preventDefault(),u.push("/movies/search/"+n)},children:Object(k.jsx)("input",{className:"search",type:"text",placeholder:"Search...",value:n,onChange:function(e){r(e.target.value)}})}),i?Object(k.jsx)(z,{}):"",i?Object(k.jsx)(U,{}):Object(k.jsx)(W,{})]})]})})},B=function(){var e=Object(o.f)(),t=Object(c.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),u=Object(s.a)(i,2),l=u[0],j=u[1],d=Object(y.a)(h),b=Object(s.a)(d,2),f=b[0],v=b[1];return console.log(f),Object(c.useEffect)((function(){v||f&&e.replace("/")}),[f,v,e]),Object(k.jsxs)("div",{className:"form",children:[Object(k.jsx)("h1",{children:"Sign In"}),Object(k.jsxs)("form",{className:"form-page",children:[Object(k.jsx)("label",{children:"Email"}),Object(k.jsx)("input",{type:"email",placeholder:"Email...",value:r,onChange:function(e){return a(e.target.value)}}),Object(k.jsx)("label",{children:"Password"}),Object(k.jsx)("input",{type:"password",placeholder:"Password...",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(k.jsxs)("div",{className:"btn-container",children:[Object(k.jsx)("button",{className:"form-btn",onClick:function(e){return function(e,t,n){try{g(e,t,n)}catch(c){console.log(c)}}(e,r,l)},children:"Sign In"}),Object(k.jsx)("button",{className:"form-btn",onClick:function(){return x(r,l)},children:"Sign In with Google"})]}),Object(k.jsxs)("p",{children:["Doesn`t have an account? ",Object(k.jsx)("span",{className:"sign-btn",onClick:function(){e.push("/signup")},children:"Sign up!"})]})]})},H=n(28);var L=function(){return Object(k.jsxs)(H.a,{children:[Object(k.jsx)(q,{}),Object(k.jsxs)(o.c,{children:[Object(k.jsx)(o.a,{exact:!0,path:"/movies/:id",children:Object(k.jsx)(P,{})}),Object(k.jsx)(o.a,{exact:!0,path:"/",children:Object(k.jsx)(E,{})}),Object(k.jsx)(o.a,{exact:!0,path:"/myaccount",children:Object(k.jsx)(A,{})}),Object(k.jsx)(o.a,{exact:!0,path:"/movies/search/:query",children:Object(k.jsx)(M,{})}),Object(k.jsx)(o.a,{exact:!0,path:"/signup",children:Object(k.jsx)(G,{})}),Object(k.jsx)(o.a,{exact:!0,path:"/signin",children:Object(k.jsx)(B,{})})]})]})};n(67);a.a.render(Object(k.jsx)(L,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.15e3619d.chunk.js.map